<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Chocolate LM Lite">
  <meta name="theme-color" content="#3d2820">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="manifest" href="manifest.json">
  <title>会話 - Chocolate LM Lite</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/talk.css">
  <link rel="stylesheet" href="vender/default.min.css">
</head>
<body>
  <div class="app-container">
    <div class="chat-container">
      <div class="chat-header">
        <button class="icon-btn persona-btn" onclick="goToPersonas()" title="ペルソナ管理">
          <svg viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </button>
        <div class="chat-header-content">
          <div class="chat-title">読み込み中...</div>
        </div>
        <button class="icon-btn settings-btn" onclick="goToSettings()" title="設定">
          <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
          </svg>
        </button>
      </div>
      
      <div class="chat-messages" id="chatMessages">
        <div class="messages-inner" id="messagesInner">
          <div class="scroll-sentinel" id="topSentinel" aria-hidden="true"></div>
          <div class="scroll-sentinel" id="bottomSentinel" aria-hidden="true"></div>
        </div>
      </div>
      
      <div class="info-bar" id="infoBar"></div>
      
      <div class="chat-input-container">
        <div class="chat-input-wrapper">
          <label class="attachment-btn" for="attachmentInput" title="画像を添付">
            <svg viewBox="0 0 24 24">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
            </svg>
          </label>
          <input type="file" id="attachmentInput" accept="image/*" multiple style="display: none;" onchange="handleAttachment(this)">
          
          <div class="input-field-wrapper">
            <div class="attachment-preview" id="attachmentPreview"></div>
            <textarea 
              id="chatInput" 
              class="chat-input" 
              placeholder="メッセージを入力..."
              onkeydown="handleKeydown(event)"
              oninput="autoResizeTextarea(this)"
            ></textarea>
          </div>
          
          <button class="send-btn" onclick="sendMessage()" id="sendBtn">
            送信
          </button>
        </div>
        <p class="hint">AIの出力は、例え一見正しく見える意見や情報であっても、注意を払い、内容の正確性や妥当性、安全性を必ず検証してください。</p>
      </div>
    </div>
  </div>
  
  <script src="vender/highlight.min.js" defer></script>
  <script src="vender/marked.umd.js" defer></script>
  <script src="vender/purify.min.js" defer></script>
  <script src="js/common.js" defer></script>
  <script src="js/talk.js" defer></script>
</body>
</html>
